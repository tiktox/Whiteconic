<style>
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        overflow-y: auto;
    }

    .modal-content {
        background-color: var(--header-bg);
        color: var(--text-color);
        margin: 20px auto;
        width: 90%;
        max-width: 800px;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow);
        animation: modalFadeIn 0.3s;
        max-height: 90vh;
        overflow-y: auto;
    }

    @keyframes modalFadeIn {
        from {opacity: 0; transform: translateY(-50px);}
        to {opacity: 1; transform: translateY(0);}
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        border-bottom: 1px solid var(--hover-color);
    }

    .modal-title {
        font-size: 1.5rem;
        color: var(--primary-color);
        font-weight: bold;
    }

    .close-modal {
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--text-color);
    }

    .modal-body {
        padding: 20px;
    }

    .modal-footer {
        padding: 15px 20px;
        border-top: 1px solid var(--hover-color);
        display: flex;
        justify-content: flex-end;
        gap: 10px;
    }

    .form-section {
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 1px solid var(--hover-color);
    }

    .form-section-title {
        font-size: 1.2rem;
        color: var(--primary-color);
        margin-bottom: 15px;
        display: flex;
        align-items: center;
    }

    .form-section-title i {
        margin-right: 10px;
    }

    .form-row {
        display: flex;
        flex-wrap: wrap;
        margin: 0 -10px 15px;
    }

    .form-column {
        flex: 1;
        padding: 0 10px;
        min-width: 250px;
    }

    .form-group {
        margin-bottom: 15px;
    }

    .form-label {
        display: block;
        margin-bottom: 5px;
        font-weight: 500;
    }

    .form-control {
        width: 100%;
        padding: 10px 15px;
        border: 1px solid var(--hover-color);
        border-radius: 6px;
        background-color: var(--bg-color);
        color: var(--text-color);
        font-size: 0.9rem;
    }

    .form-control:focus {
        outline: none;
        border-color: var(--primary-color);
    }

    .radio-group {
        display: flex;
        gap: 15px;
        flex-wrap: wrap; 
    }

    .radio-option {
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .btn {
        padding: 10px 20px;
        border-radius: 20px;
        border: none;
        cursor: pointer;
        font-weight: 600;
    }

    .btn-primary {
        background-color: var(--primary-color);
        color: white;
    }

    .btn-secondary {
        background-color: var(--hover-color);
        color: var(--text-color);
    }

    .btn:hover {
        opacity: 0.9;
        transform: translateY(-2px);
    }

    textarea.form-control {
        min-height: 120px;
        resize: vertical;
    }

    .file-upload {
        position: relative;
        padding: 10px;
        border: 2px dashed var(--hover-color);
        border-radius: 6px;
        text-align: center;
        cursor: pointer;
        margin-bottom: 10px;
    }

    .file-upload:hover {
        border-color: var(--primary-color);
    }

    .file-upload input[type="file"] {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        opacity: 0;
        cursor: pointer;
    }

    .uploaded-files {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 10px;
    }

    .thumbnail {
        width: 100px;
        height: 100px;
        object-fit: cover;
        border-radius: 4px;
    }

    .map-container {
        height: 300px;
        border-radius: 6px;
        overflow: hidden;
        margin-bottom: 15px;
    }

    .checkbox-group {
        margin-bottom: 10px;
    }

    .step-indicator {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        overflow-x: auto;
        padding-bottom: 10px;
    }

    .step {
        display: flex;
        flex-direction: column;
        align-items: center;
        flex: 1;
        min-width: 80px;
    }

    .step-number {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background-color: var(--hover-color);
        color: var(--text-color);
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 5px;
        font-weight: bold;
    }

    .step.active .step-number {
        background-color: var(--primary-color);
        color: white;
    }

    .step-text {
        font-size: 0.8rem;
        text-align: center;
    }

    .step-connector {
        flex-grow: 1;
        height: 2px;
        background-color: var(--hover-color);
        margin: 15px 5px 0;
    }

    .form-page {
        display: none;
    }

    .form-page.active {
        display: block;
    }

    /* Responsive ajustments */
    @media (max-width: 768px) {
        .form-column {
            flex: 100%;
        }
        
        .modal-content {
            width: 95%;
            margin: 10px auto;
        }
    }
</style>

<!-- Modal para nueva propiedad -->
<div id="newPropertyModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">
                <i class="fas fa-plus-circle"></i>
                Nueva Propiedad
            </h2>
            <span class="close-modal" id="closeModal">&times;</span>
        </div>
        
        <div class="modal-body">
            <div class="step-indicator">
                <div class="step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-text">Información del Propietario</div>
                </div>
                <div class="step-connector"></div>
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-text">Detalles</div>
                </div>
                <div class="step-connector"></div>
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-text">Ubicación</div>
                </div>
                <div class="step-connector"></div>
                <div class="step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-text">Características</div>
                </div>
                <div class="step-connector"></div>
                <div class="step" data-step="5">
                    <div class="step-number">5</div>
                    <div class="step-text">Precio</div>
                </div>
                <div class="step-connector"></div>
                <div class="step" data-step="6">
                    <div class="step-number">6</div>
                    <div class="step-text">Multimedia</div>
                </div>
                <div class="step-connector"></div>
                <div class="step" data-step="7">
                    <div class="step-number">7</div>
                    <div class="step-text">Documentos</div>
                </div>
                <div class="step-connector"></div>
                <div class="step" data-step="8">
                    <div class="step-number">8</div>
                    <div class="step-text">Preferencias</div>
                </div>
                <div class="step-connector"></div>
                <div class="step" data-step="9">
                    <div class="step-number">9</div>
                    <div class="step-text">Finalizar</div>
                </div>
            </div>

            <form id="propertyForm">
                <!-- Página 1: Información del Propietario -->
                <div class="form-page active" data-page="1">
                    <div class="form-section">
                        <h3 class="form-section-title">
                            <i class="fas fa-user"></i>
                            Información del Propietario / Cliente
                        </h3>
                        <div class="form-row">
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="ownerName">Nombre completo *</label>
                                    <input type="text" id="ownerName" class="form-control" required>
                                </div>
                            </div>
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="ownerPhone">Teléfono de contacto *</label>
                                    <input type="tel" id="ownerPhone" class="form-control" required>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="ownerEmail">Correo electrónico *</label>
                                    <input type="email" id="ownerEmail" class="form-control" required>
                                </div>
                            </div>
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="isOwner">¿Es usted el propietario o representante autorizado? *</label>
                                    <div class="radio-group">
                                        <div class="radio-option">
                                            <input type="radio" id="isOwnerYes" name="isOwner" value="si" required>
                                            <label for="isOwnerYes">Sí</label>
                                        </div>
                                        <div class="radio-option">
                                            <input type="radio" id="isOwnerNo" name="isOwner" value="no">
                                            <label for="isOwnerNo">No</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="ownerID">Identificación personal (opcional)</label>
                                    <input type="text" id="ownerID" class="form-control" placeholder="Cédula o Pasaporte">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Página 2: Detalles de la Propiedad -->
                <div class="form-page" data-page="2">
                    <div class="form-section">
                        <h3 class="form-section-title">
                            <i class="fas fa-home"></i>
                            Detalles de la Propiedad
                        </h3>
                        <div class="form-row">
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="propertyType">Tipo de propiedad *</label>
                                    <select id="propertyType" class="form-control" required>
                                        <option value="">Seleccione un tipo</option>
                                        <option value="casa">Casa</option>
                                        <option value="apartamento">Apartamento</option>
                                        <option value="solar">Solar</option>
                                        <option value="terreno">Terreno</option>
                                        <option value="negocio">Negocio</option>
                                        <option value="oficina">Oficina</option>
                                        <option value="local">Local comercial</option>
                                        <option value="proyecto">Proyecto</option>
                                        <option value="otro">Otro</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="propertyTitle">Título del anuncio *</label>
                                    <input type="text" id="propertyTitle" class="form-control" placeholder="Ej: Casa familiar en Santo Domingo con patio grande" required>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="propertyDescription">Descripción detallada *</label>
                            <textarea id="propertyDescription" class="form-control" placeholder="Describa su propiedad con detalles atractivos para los potenciales compradores/inquilinos (mínimo 200 caracteres)" required></textarea>
                            <small>Mínimo 200 caracteres</small>
                        </div>
                        <div class="form-row">
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="propertyAddress">Dirección exacta *</label>
                                    <input type="text" id="propertyAddress" class="form-control" required>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="propertyProvince">Provincia / Ciudad *</label>
                                    <select id="propertyProvince" class="form-control" required>
                                        <option value="">Seleccione</option>
                                        <option value="santodomingo">Santo Domingo</option>
                                        <option value="santiago">Santiago</option>
                                        <option value="puertoPlata">Puerto Plata</option>
                                        <option value="laRomana">La Romana</option>
                                        <option value="sanCristobal">San Cristóbal</option>
                                        <option value="laVega">La Vega</option>
                                        <option value="sanPedro">San Pedro de Macorís</option>
                                        <option value="samana">Samaná</option>
                                        <!-- Agregar más provincias según sea necesario -->
                                    </select>
                                </div>
                            </div>
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="propertySector">Sector / Zona *</label>
                                    <input type="text" id="propertySector" class="form-control" required>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Página 3: Ubicación en el Mapa -->
                <div class="form-page" data-page="3">
                    <div class="form-section">
                        <h3 class="form-section-title">
                            <i class="fas fa-map-marker-alt"></i>
                            Ubicación en el Mapa
                        </h3>
                        <p>Coloque un pin en el mapa para indicar la ubicación exacta de su propiedad.</p>
                        <div class="map-container" id="mapContainer">
                            <!-- Aquí irá el mapa de Google Maps o Leaflet -->
                            <div style="background-color: #e9ecef; height: 100%; display: flex; align-items: center; justify-content: center;">
                                Mapa interactivo de ubicación
                                <!-- Este div es temporal, será reemplazado por el mapa real -->
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="propertyLatitude">Latitud</label>
                                    <input type="text" id="propertyLatitude" class="form-control" readonly>
                                </div>
                            </div>
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="propertyLongitude">Longitud</label>
                                    <input type="text" id="propertyLongitude" class="form-control" readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Página 4: Detalles técnicos -->
                <div class="form-page" data-page="4">
                    <div class="form-section">
                        <h3 class="form-section-title">
                            <i class="fas fa-ruler-combined"></i>
                            Detalles técnicos
                        </h3>
                        <div class="form-row">
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="propertyLandSize">Tamaño del terreno (m²) *</label>
                                    <input type="number" id="propertyLandSize" class="form-control" min="0" required>
                                </div>
                            </div>
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="propertyBuildSize">Tamaño de construcción (m²)</label>
                                    <input type="number" id="propertyBuildSize" class="form-control" min="0">
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="propertyBedrooms">Cantidad de habitaciones</label>
                                    <input type="number" id="propertyBedrooms" class="form-control" min="0">
                                </div>
                            </div>
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="propertyBathrooms">Cantidad de baños</label>
                                    <input type="number" id="propertyBathrooms" class="form-control" min="0">
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="propertyParking">Estacionamientos</label>
                                    <input type="number" id="propertyParking" class="form-control" min="0">
                                </div>
                            </div>
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="propertyYear">Año de construcción</label>
                                    <input type="number" id="propertyYear" class="form-control" min="1900" max="2100">
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="propertyStatus">Estado de la propiedad *</label>
                                    <select id="propertyStatus" class="form-control" required>
                                        <option value="">Seleccione un estado</option>
                                        <option value="nueva">Nueva</option>
                                        <option value="usada">Usada</option>
                                        <option value="remodelacion">En remodelación</option>
                                        <option value="proyecto">Proyecto</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Página 5: Información financiera -->
                <div class="form-page" data-page="5">
                    <div class="form-section">
                        <h3 class="form-section-title">
                            <i class="fas fa-dollar-sign"></i>
                            Información financiera
                        </h3>
                        <div class="form-row">
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="listingType">Tipo de publicación *</label>
                                    <select id="listingType" class="form-control" required>
                                        <option value="">Seleccione</option>
                                        <option value="venta">Venta</option>
                                        <option value="alquiler">Alquiler</option>
                                        <option value="proyecto">Proyecto</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="propertyPrice">Precio total (RD$) *</label>
                                    <input type="number" id="propertyPrice" class="form-control" min="0" required>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="isNegotiable">¿El precio es negociable?</label>
                                    <div class="radio-group">
                                        <div class="radio-option">
                                            <input type="radio" id="isNegotiableYes" name="isNegotiable" value="si">
                                            <label for="isNegotiableYes">Sí</label>
                                        </div>
                                        <div class="radio-option">
                                            <input type="radio" id="isNegotiableNo" name="isNegotiable" value="no">
                                            <label for="isNegotiableNo">No</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="acceptsFinancing">¿Acepta financiamiento?</label>
                                    <div class="radio-group">
                                        <div class="radio-option">
                                            <input type="radio" id="acceptsFinancingYes" name="acceptsFinancing" value="si">
                                            <label for="acceptsFinancingYes">Sí</label>
                                        </div>
                                        <div class="radio-option">
                                            <input type="radio" id="acceptsFinancingNo" name="acceptsFinancing" value="no">
                                            <label for="acceptsFinancingNo">No</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Página 6: Fotos y videos -->
                <div class="form-page" data-page="6">
                    <div class="form-section">
                        <h3 class="form-section-title">
                            <i class="fas fa-images"></i>
                            Fotos y videos
                        </h3>
                        <div class="form-group">
                            <label class="form-label">Imágenes de la propiedad (máximo 10) *</label>
                            <div class="file-upload">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Haga clic o arrastre para subir imágenes</p>
                                <input type="file" id="propertyImages" accept="image/jpeg,image/png,image/webp" multiple>
                            </div>
                            <small>Formatos aceptados: JPEG, PNG, WEBP</small>
                            <div class="uploaded-files" id="imagesPreview">
                                <!-- Aquí irán las miniaturas de las imágenes subidas -->
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="videoURL">Video (opcional)</label>
                            <input type="text" id="videoURL" class="form-control" placeholder="URL de YouTube o enlace de video">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Video de la propiedad (opcional)</label>
                            <div class="file-upload">
                                <i class="fas fa-video"></i>
                                <p>Haga clic o arrastre para subir video</p>
                                <input type="file" id="propertyVideo" accept="video/mp4">
                            </div>
                            <small>Formato aceptado: MP4</small>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Plano de la propiedad (opcional)</label>
                            <div class="file-upload">
                                <i class="fas fa-project-diagram"></i>
                                <p>Haga clic o arrastre para subir plano</p>
                                <input type="file" id="propertyPlan" accept="image/jpeg,image/png,image/webp,application/pdf">
                            </div>
                            <small>Formatos aceptados: JPEG, PNG, WEBP, PDF</small>
                        </div>
                    </div>
                </div>

                <!-- Página 7: Documentación -->
                <div class="form-page" data-page="7">
                    <div class="form-section">
                        <h3 class="form-section-title">
                            <i class="fas fa-file-alt"></i>
                            Documentación (opcional pero recomendado)
                        </h3>
                        <div class="form-group">
                            <label class="form-label">Certificado de título</label>
                            <div class="file-upload">
                                <i class="fas fa-certificate"></i>
                                <p>Haga clic o arrastre para subir certificado</p>
                                <input type="file" id="titleCertificate" accept="application/pdf,image/jpeg,image/png">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Plano catastral</label>
                            <div class="file-upload">
                                <i class="fas fa-map"></i>
                                <p>Haga clic o arrastre para subir plano catastral</p>
                                <input type="file" id="cadastralPlan" accept="application/pdf,image/jpeg,image/png">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Carta de autorización de corretaje (si aplica)</label>
                            <div class="file-upload">
                                <i class="fas fa-file-contract"></i>
                                <p>Haga clic o arrastre para subir carta</p>
                                <input type="file" id="brokerageAuthorization" accept="application/pdf,image/jpeg,image/png,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Otros documentos</label>
                            <div class="file-upload">
                                <i class="fas fa-file"></i>
                                <p>Haga clic o arrastre para subir otros documentos</p>
                                <input type="file" id="otherDocuments" accept="application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document" multiple>
                            </div>
                            <small>Formatos aceptados: PDF, Word</small>
                        </div>
                    </div>
                </div>

                <!-- Página 8: Preferencias -->
                <div class="form-page" data-page="8">
                    <div class="form-section">
                        <h3 class="form-section-title">
                            <i class="fas fa-cog"></i>
                            Preferencias
                        </h3>
                        <div class="form-row">
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="showPhone">Mostrar número de teléfono público</label>
                                        <div class="radio-group">
                                        <div class="radio-option">
                                            <input type="radio" id="showPhoneYes" name="showPhone" value="si" checked>
                                            <label for="showPhoneYes">Sí</label>
                                        </div>
                                        <div class="radio-option">
                                            <input type="radio" id="showPhoneNo" name="showPhone" value="no">
                                            <label for="showPhoneNo">No</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="contactSchedule">Horario preferido para contactos</label>
                                    <select id="contactSchedule" class="form-control">
                                        <option value="cualquier">Cualquier horario</option>
                                        <option value="manana">Mañanas (8am - 12pm)</option>
                                        <option value="tarde">Tardes (1pm - 6pm)</option>
                                        <option value="noche">Noches (6pm - 9pm)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="exclusiveListing">¿Desea publicación exclusiva con nuestra agencia?</label>
                                    <div class="radio-group">
                                        <div class="radio-option">
                                            <input type="radio" id="exclusiveYes" name="exclusiveListing" value="si">
                                            <label for="exclusiveYes">Sí</label>
                                        </div>
                                        <div class="radio-option">
                                            <input type="radio" id="exclusiveNo" name="exclusiveListing" value="no" checked>
                                            <label for="exclusiveNo">No</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-column">
                                <div class="form-group">
                                    <label class="form-label" for="listingDuration">Duración de la publicación</label>
                                    <select id="listingDuration" class="form-control">
                                        <option value="30">30 días</option>
                                        <option value="60">60 días</option>
                                        <option value="90">90 días</option>
                                        <option value="120">120 días</option>
                                        <option value="indefinido">Indefinido</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Notas adicionales para el agente</label>
                            <textarea id="agentNotes" class="form-control" placeholder="Escriba aquí cualquier instrucción especial o información adicional que desee compartir con nuestro equipo"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Página 9: Finalizar -->
                <div class="form-page" data-page="9">
                    <div class="form-section">
                        <h3 class="form-section-title">
                            <i class="fas fa-check-circle"></i>
                            Revisión y Finalización
                        </h3>
                        <div class="form-group">
                            <div class="checkbox-group">
                                <input type="checkbox" id="termsAgreement" required>
                                <label for="termsAgreement">Acepto los <a href="#" target="_blank">Términos y Condiciones</a> y la <a href="#" target="_blank">Política de Privacidad</a> *</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="checkbox-group">
                                <input type="checkbox" id="marketingConsent">
                                <label for="marketingConsent">Acepto recibir comunicaciones de marketing sobre servicios inmobiliarios</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <p>Por favor revise cuidadosamente toda la información ingresada antes de enviar el formulario. Un representante de nuestra agencia se pondrá en contacto con usted dentro de las próximas 24 horas para verificar los detalles y coordinar los próximos pasos.</p>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" id="prevBtn">Anterior</button>
            <button type="button" class="btn btn-secondary" id="nextBtn">Siguiente</button>
            <button type="button" class="btn btn-primary" id="submitBtn" style="display: none;">Enviar Formulario</button>
        </div>
    </div>
</div>

<!-- Script para el funcionamiento del modal -->
<script>
// Reemplaza todo el script del modal de nueva propiedad con este:

document.addEventListener('DOMContentLoaded', function() {
    const newPropertyModal = document.getElementById('newPropertyModal');
    const closeNewPropertyModal = document.querySelector('#newPropertyModal .close-modal');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const submitBtn = document.getElementById('submitBtn');
    const formPages = document.querySelectorAll('.form-page');
    const steps = document.querySelectorAll('.step');
    
    let currentPage = 1;
    const totalPages = formPages.length;
    
    function updateButtons() {
        prevBtn.style.display = currentPage === 1 ? 'none' : 'block';
        nextBtn.style.display = currentPage === totalPages ? 'none' : 'block';
        submitBtn.style.display = currentPage === totalPages ? 'block' : 'none';
        
        steps.forEach(step => {
            const stepNumber = parseInt(step.dataset.step);
            if (stepNumber < currentPage) {
                step.classList.add('completed');
                step.classList.remove('active');
            } else if (stepNumber === currentPage) {
                step.classList.add('active');
                step.classList.remove('completed');
            } else {
                step.classList.remove('active', 'completed');
            }
        });
    }
    
    function goToPage(page) {
        if (page > currentPage) {
            const currentForm = document.querySelector(`.form-page[data-page="${currentPage}"]`);
            const requiredFields = currentForm.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value) {
                    field.style.borderColor = 'red';
                    isValid = false;
                } else {
                    field.style.borderColor = '';
                }
            });
            
            if (!isValid) {
                alert('Por favor complete todos los campos requeridos antes de continuar.');
                return;
            }
        }
        
        formPages.forEach(formPage => {
            formPage.classList.remove('active');
            if (parseInt(formPage.dataset.page) === page) {
                formPage.classList.add('active');
            }
        });
        
        currentPage = page;
        updateButtons();
        newPropertyModal.querySelector('.modal-body').scrollTop = 0;
    }
    
    // Cerrar modal al hacer clic en la X
    closeNewPropertyModal.addEventListener('click', function() {
        newPropertyModal.style.display = 'none';
    });
    
    // Cerrar modal al hacer clic fuera del contenido
    window.addEventListener('click', function(event) {
        if (event.target === newPropertyModal) {
            newPropertyModal.style.display = 'none';
        }
    });
    
    prevBtn.addEventListener('click', function() {
        if (currentPage > 1) {
            goToPage(currentPage - 1);
        }
    });
    
    nextBtn.addEventListener('click', function() {
        if (currentPage < totalPages) {
            goToPage(currentPage + 1);
        }
    });
    
    submitBtn.addEventListener('click', function() {
        if (!document.getElementById('termsAgreement').checked) {
            alert('Debe aceptar los términos y condiciones para continuar.');
            return;
        }
        
        alert('Formulario enviado con éxito. Nos pondremos en contacto pronto.');
        newPropertyModal.style.display = 'none';
    });
    
    // Mostrar previsualización de imágenes
    document.getElementById('propertyImages').addEventListener('change', function(e) {
        const previewContainer = document.getElementById('imagesPreview');
        previewContainer.innerHTML = '';
        
        if (this.files.length > 10) {
            alert('Solo puede subir un máximo de 10 imágenes.');
            this.value = '';
            return;
        }
        
        Array.from(this.files).forEach(file => {
            const reader = new FileReader();
            reader.onload = function(event) {
                const img = document.createElement('img');
                img.src = event.target.result;
                img.classList.add('thumbnail');
                previewContainer.appendChild(img);
            }
            reader.readAsDataURL(file);
        });
    });
    
    updateButtons();
           // Desplazar hacia arriba para mejor experiencia de usuario
           modal.querySelector('.modal-body').scrollTop = 0;
});
            
     
        
        // Event listeners
        closeModal.addEventListener('click', function() {
            modal.style.display = 'none';
        });
        
        prevBtn.addEventListener('click', function() {
            if (currentPage > 1) {
                goToPage(currentPage - 1);
            }
        });
        
        nextBtn.addEventListener('click', function() {
            if (currentPage < totalPages) {
                goToPage(currentPage + 1);
            }
        });
        
        submitBtn.addEventListener('click', function() {
            // Validar términos y condiciones
            if (!document.getElementById('termsAgreement').checked) {
                alert('Debe aceptar los términos y condiciones para continuar.');
                return;
            }
            
            // Aquí iría el código para enviar el formulario
            alert('Formulario enviado con éxito. Nos pondremos en contacto pronto.');
            modal.style.display = 'none';
            
            // En un caso real, aquí se enviarían los datos al servidor
            // const formData = new FormData(document.getElementById('propertyForm'));
            // fetch('/submit-property', { method: 'POST', body: formData })
            //   .then(response => response.json())
            //   .then(data => console.log('Success:', data))
            //   .catch(error => console.error('Error:', error));
        });
        
        // Mostrar previsualización de imágenes
        document.getElementById('propertyImages').addEventListener('change', function(e) {
            const previewContainer = document.getElementById('imagesPreview');
            previewContainer.innerHTML = '';
            
            if (this.files.length > 10) {
                alert('Solo puede subir un máximo de 10 imágenes.');
                this.value = '';
                return;
            }
            
            Array.from(this.files).forEach(file => {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const img = document.createElement('img');
                    img.src = event.target.result;
                    img.classList.add('thumbnail');
                    previewContainer.appendChild(img);
                }
                reader.readAsDataURL(file);
            });
        });
        
        // Inicializar botones
        updateButtons();
    
    // Función para abrir el modal (se llamaría desde otro lugar de la aplicación)
    function openPropertyModal() {
        document.getElementById('propertyModal').style.display = 'block';
    }
</script>